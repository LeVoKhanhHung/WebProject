<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Thông Tin Cá Nhân</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/guestInfo.css">
</head>
<body>
<!-- Header -->
<section class="header">
    <div>
        <div class="" style="background-color: antiquewhite">
            <div class="row">
                <div class="col-3 p-2 text-black">
                    <div class="d-flex justify-content-center">
                        <img src="../../img/logo.png" style="height: 50px" alt="Logo">
                    </div>
                </div>
                <div class="col-6 p-3 text-black">
                    <div class="d-flex justify-content-center">
                        <ul class="nav">
                            <li class="nav-item">
                                <a class="nav-link fw-bold text-dark" href="#">HOME</a>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn dropdown-toggle fw-bold" data-bs-toggle="dropdown">SẢN
                                    PHẨM
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Nấm Tươi</a></li>
                                    <li><a class="dropdown-item" href="#">Nấm Khô</a></li>
                                    <li><a class="dropdown-item" href="#">Bột Nấm Ăn</a></li>
                                    <li><a class="dropdown-item" href="#">Nấm Dược Liệu</a></li>
                                    <li><a class="dropdown-item" href="#">Chà Bông Nấm</a></li>
                                </ul>
                            </li>
                            <li>
                                <button type="button" class="btn dropdown-toggle fw-bold" data-bs-toggle="dropdown">CHIA
                                    SẺ
                                </button>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link fw-bold text-dark" href="#">HỢP TÁC</a>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn dropdown-toggle fw-bold" data-bs-toggle="dropdown">CÔNG
                                    TY
                                </button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn dropdown-toggle fw-bold" data-bs-toggle="dropdown">
                                    KHÁCH HÀNG
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-3 p-3 text-black">
                    <div class="d-flex justify-content-center">
                        <ul class="nav">
                            <li class="nav-item">
                                <button type="button" class="btn btn-warning">hung</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn"><i class="fa-solid fa-user"></i></button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="btn"><i class="fa-solid fa-cart-shopping"></i></button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="content">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="profile-card p-4 border rounded-3">
                    <!-- Thông tin cá nhân và ảnh đại diện -->
                    <div class="profile-container">
                        <div class="container mt-4">
                            <div class="row align-items-center">
                                <!-- Ảnh đại diện -->
                                <div class="col-md-4 text-center">
                                    <img src="https://via.placeholder.com/200x200" alt="Profile Image" class="profile-image" id="profile-image" onclick="changeProfileImage()">
                                </div>
                                <!-- Thông tin cá nhân -->
                                <div class="col-md-8">
                                    <h5>Thông tin cá nhân</h5>
                                    <h3 id="user-name">Lê Võ Khánh Hưng</h3> <!-- userName -->
                                    <p id="user-email">19130083@st.hcmuaf.edu.vn</p> <!-- email -->
                                    <ul class="list-unstyled">
                                        <li><strong>Địa chỉ:</strong> <span id="user-address">123 Đường ABC, TP.HCM</span></li> <!-- address -->
                                        <li><strong>Số điện thoại:</strong> <span id="user-phone">0987654321</span></li> <!-- phoneNumber -->
                                        <li><strong>Ngày sinh:</strong> <span id="user-birthdate">01/01/1990</span></li> <!-- birthDate -->
                                        <li><strong>Công ty:</strong> <span id="user-company">Công ty ABC</span></li> <!-- companyName -->
                                    </ul>
                                    <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#editProfileModal">Chỉnh sửa thông tin</button>
                                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#changePasswordModal">Thay đổi mật khẩu</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Lịch sử đơn hàng -->
                    <h5>Lịch sử đơn hàng</h5>
                    <ul class="list-group">
                        <li class="list-group-item">Đơn hàng #1 - Ngày: 10/11/2024</li>
                        <li class="list-group-item">Đơn hàng #2 - Ngày: 12/11/2024</li>
                    </ul>
                </div>

                <!-- Giỏ hàng và Wishlist -->
                <div class="section-container row mt-4">
                    <div class="col-md-6">
                        <div class="container border rounded-3 p-3">
                            <h5>Giỏ hàng</h5>
                            <p>Danh sách sản phẩm trong giỏ hàng.</p>
                            <button class="btn btn-success" onclick="window.location.href='giohang.html'">Đi đến Giỏ
                                hàng
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="container border rounded-3 p-3">
                            <h5>Wishlist</h5>
                            <p>Danh sách sản phẩm yêu thích.</p>
                            <button class="btn btn-warning" onclick="window.location.href='wishlist.html'">Đi đến
                                Wishlist
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Chỉnh sửa thông tin cá nhân -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel">Chỉnh sửa thông tin cá nhân</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <div class="mb-3">
                            <label for="editName" class="form-label">Tên</label>
                            <input type="text" class="form-control" id="editName" value="Nguyễn Văn A">
                        </div>
                        <div class="mb-3">
                            <label for="editEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="editEmail" value="nguyenvana@example.com">
                        </div>
                        <div class="mb-3">
                            <label for="editPhone" class="form-label">Số điện thoại</label>
                            <input type="text" class="form-control" id="editPhone" value="0987654321" maxlength="10">
                        </div>
                        <div class="mb-3">
                            <label for="editBirthdate" class="form-label">Ngày sinh</label>
                            <input type="date" class="form-control" id="editBirthdate" value="1990-01-01">
                        </div>
                        <div class="mb-3">
                            <label for="editCompany" class="form-label">Công ty</label>
                            <input type="text" class="form-control" id="editCompany" value="Công ty ABC">
                        </div>
                        <div class="mb-3">
                            <label for="editAddress" class="form-label">Địa chỉ</label>
                            <input type="text" class="form-control" id="editAddress" value="123 Đường XYZ, Hà Nội">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">Lưu thay đổi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Thay đổi mật khẩu -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="changePasswordModalLabel">Thay đổi mật khẩu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <div class="mb-3">
                            <label for="oldPassword" class="form-label">Mật khẩu cũ</label>
                            <input type="password" class="form-control" id="oldPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Mật khẩu mới</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Xác nhận mật khẩu mới</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" onclick="changePassword()">Lưu thay đổi</button>
                </div>
            </div>
        </div>
    </div>
</section>
<div style="height: 200px;"></div>

<!-- Footer -->
<section class="footer">
    <div style="height: 50px">
        <div class="" style="background-color: #f3eee7">
            <div class="container">
                <div class="row">
                    <div class="col-5 p-2 text-black">
                        <div class="d-flex justify-content-center">
                            <img src="../../img/logo.png" style="height: 100px" alt="Logo">
                        </div>
                        <div class="container" style="width: 500px">
                            <div class="mt-3 p-2 text-bg-danger fw-bold rounded text-start fs-6" style="height: 40px">
                                CÔNG TY TNHH 3 THÀNH VIÊN
                            </div>
                            <ul class="nav mt-3">
                                <li class="fw-bold text-secondary">Mã số doanh nghiệp (MST)</li>
                                <li class="text-secondary">: 0317078076 do Sở Kế Hoạch và Đầu</li>
                                <li class="text-secondary">Tư TP Hồ Chí Minh cấp lần đầu ngày 14/12/2024</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Số chứng nhận ATTP</li>
                                <li class="text-secondary">: 3956/2022/BQLATTP-HCM</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Địa chỉ</li>
                                <li class="text-secondary">: 267 Phường Đông Hòa, Dĩ An, Bình Dương, Việt Nam</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Hotline Hợp Tác:</li>
                                <li class="text-secondary">027 363 7756 (Mr T)</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Email Liên Hệ</li>
                                <li class="text-secondary">: st@hcmuaf.edu.vn</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Giờ Làm Việc</li>
                                <li class="text-secondary">: Thứ 2 - Thứ 7 (8h00-17h30)</li>
                            </ul>

                            <div class="mt-3 p-2 text-bg-danger fw-bold rounded text-start fs-6" style="height: 40px">
                                Địa Điểm Kinh Doanh 1
                            </div>
                            <ul class="nav mt-3">
                                <li class="fw-bold text-secondary">Số chứng nhận HACCP</li>
                                <li class="text-secondary">: GOODVN55788.HACCP</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Địa chỉ</li>
                                <li class="text-secondary">: 50/238 - 50/123 An Phú Đông, Quận 11, TP Hồ Chí Minh</li>
                                <li class="text-secondary">, Việt Nam</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Hotline/Zalo Bán Lẻ</li>
                                <li class="text-secondary">: 027 772 3535 (Mr A)</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Email Hổ Trợ KH</li>
                                <li class="text-secondary">: hotro@hcmuaf.edu.vn</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Giờ Làm Việc</li>
                                <li class="text-secondary">: Thứ 2 - Thứ 7 (8h00-17h30)</li>
                            </ul>

                            <div class="mt-3 p-2 text-bg-danger fw-bold rounded text-start fs-6" style="height: 40px">
                                HKD NÔNG TRẠI NẤM (CENTER)
                            </div>
                            <ul class="nav mt-3">
                                <li class="fw-bold text-secondary">Mã số doanh nghiệp</li>
                                <li class="text-secondary">: 20H5561516 do Phòng Tài Chính Kế Hoạch</li>
                                <li class="text-secondary">UBND Huyện Đức Hòa cấp lần đầu ngày 17/08/2021</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Số chứng nhận ATTP</li>
                                <li class="text-secondary">: 21/2021/NNPTNT-LAN</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Địa chỉ</li>
                                <li class="text-secondary">: Ấp 5, Phường Đông Hòa, Dĩ An, tỉnh Bình Dương,</li>
                                <li class="text-secondary">Việt Nam</li>
                            </ul>
                            <ul class="nav mt-2">
                                <li class="fw-bold text-secondary">Giờ Làm Việc</li>
                                <li class="text-secondary">: Thứ 2 - Thứ 7 (7h00-22h00)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-3 p-2 text-black">
                        <div class="d-flex justify-content-left">
                            <div class="d-flex ps-1">
                                <div class="vstack gap-3">
                                    <div class="p-2 pb-0 text-danger fw-bold fs-5" style="--bs-text-opacity: 1;">THÔNG
                                        TIN
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Giới
                                        Thiệu
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Nông
                                        Trại
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Cửa
                                        Hàng
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Đối Tác
                                        KD
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Truyền
                                        Thông
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Ưu
                                        Đãi
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Hỏi Đáp
                                        - FAQs
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Liên
                                        Hệ
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center text-secondary fw-light">
                            ------------------------------------------------
                        </div>
                        <div class="d-flex justify-content-left">
                            <div class="d-flex ps-1">
                                <div class="vstack gap-3">
                                    <div class="p-2 pb-0 text-danger fw-bold fs-5" style="--bs-text-opacity: 1;">CHÍNH
                                        SÁCH
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chính
                                        Sách Vận Chuyển
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chính
                                        Sách Thanh Toán
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chính
                                        Sách Tích Điểm KHTT
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chính
                                        Sách Cookie
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chính
                                        Sách Bảo Mật
                                    </div>
                                    <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Điều
                                        Khoản Sử Dụng
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 p-2 text-black">
                        <div class="container">
                            <div class="d-flex justify-content-center">
                                <div class="d-flex ps-1">
                                    <div class="vstack gap-3">
                                        <div class="p-2 pb-0 text-danger fw-bold fs-5" style="--bs-text-opacity: 1;">
                                            DÒNG SẢN PHẨM
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Nấm
                                            Tươi
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Nấm
                                            Khô
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Bột
                                            Nấm Ăn
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Nấm
                                            Dược Liệu
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">Chà
                                            Bông Nấm
                                        </div>
                                        <div class="p-2 pt-0 text-secondary fw-normal" style="--bs-text-opacity: 1;">
                                            Phôi Nấm
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ps-5 d-flex justify-content-end text-secondary fw-light">
                            -----------------------------------------------
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center mt-1">
                    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                </div>
                <div class="row">
                    <div class="mt-3 ps-4 pb-3 col-4 d-flex justify-content-center">Copyright © 2021–2025 Nấm Xanh. All
                        rights reserved.
                    </div>
                    <div class="mt-3 col-7 d-flex justify-content-end">
                        <ul class="nav">
                            <li><a href=""><img src="../../img/logo1.png" style="width: 40px" class="" alt="..."></a>
                            </li>
                            <li class="ps-1"><a href=""><img src="../../img/logo2.png" style="width: 30px" class=""
                                                             alt="..."></a>
                            </li>
                            <li class="ps-1"><a href=""><img src="../../img/logo3.png" style="width: 30px" class=""
                                                             alt="..."></a>
                            </li>
                            <li class="ps-1"><a href=""><img src="../../img/logo4.png" style="width: 30px" class=""
                                                             alt="..."></a>
                            </li>
                            <li class="ps-1"><a href=""><img src="../../img/logo5.png" style="width: 40px" class=""
                                                             alt="..."></a>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script>
    function saveProfile() {
        const name = document.getElementById('editName').value;
        const email = document.getElementById('editEmail').value;
        const phone = document.getElementById('editPhone').value;
        const birthdate = document.getElementById('editBirthdate').value;
        const company = document.getElementById('editCompany').value;
        const address = document.getElementById('editAddress').value;

        document.getElementById('user-name').innerText = name;
        document.getElementById('user-email').innerText = email;
        document.getElementById('user-phone').innerText = phone;
        document.getElementById('user-birthdate').innerText = new Date(birthdate).toLocaleDateString('vi-VN');
        document.getElementById('user-company').innerText = company;
        document.getElementById('user-address').innerText = address;

        const modal = bootstrap.Modal.getInstance(document.getElementById('editProfileModal'));
        modal.hide();
    }

    function changePassword() {
        const email = sessionStorage.getItem("loggedInUser"); // Lấy email của người dùng đã đăng nhập
        const oldPassword = document.getElementById('oldPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (!email) {
            alert('Không tìm thấy người dùng đang đăng nhập!');
            return;
        }

        // Lấy danh sách người dùng từ localStorage
        const users = JSON.parse(localStorage.getItem('users')) || [];

        const user = users.find(user => user.email === email);

        if (!user) {
            alert('Người dùng không tồn tại!');
            return;
        }

        if (user.password !== oldPassword) {
            alert('Mật khẩu cũ không chính xác!');
            return;
        }

        if (newPassword !== confirmPassword) {
            alert('Mật khẩu mới và xác nhận không khớp!');
            return;
        }

        // Cập nhật mật khẩu
        user.password = newPassword;

        // Lưu lại danh sách người dùng với mật khẩu đã thay đổi vào localStorage
        localStorage.setItem('users', JSON.stringify(users));

        alert('Mật khẩu đã được thay đổi thành công!');

        // Đóng modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('changePasswordModal'));
        modal.hide();
    }
</script>

<script src="../../js/bootstrap.bundle.min.js"></script>
</body>
</html>
